<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Easy Order Portal Login Page</title>
    <style> 

	@font-face {
	    font-family: 'Sansa';
	    src: url("https://raw.githubusercontent.com/TRod-Dev/Puratos_EOP_Test/main/Sansa.ttf") format("truetype");
	    font-weight: normal;
	    font-style: normal;
	}
	
	@font-face {
	    font-family: 'Century Gothic';
	    src: url("https://raw.githubusercontent.com/TRod-Dev/Puratos_EOP_Test/main/centurygothic.ttf") format("truetype");
	    font-weight: normal;
	    font-style: normal;
	}
	
	@font-face {
	    font-family: 'Karmina';
	    src: url("https://raw.githubusercontent.com/TRod-Dev/Puratos_EOP_Test/main/Karmina%20Regular.otf") format("opentype");
	    font-weight: normal;
	    font-style: normal;
	}

	/* Fallback fonts (Remove if custom fonts are hosted correctly) */
	body, html {
		font-family: 'Century Gothic','Sansa','Karmina';
	}

	h1 {
		font-size: 20px;
	}

	body {
	    max-width: 100%;
	    margin: auto;
	    text-align: center;
	    background-image: none;
		background-color: white;
	    color: black;
	    height: fit-content;
	    height: 100%;
	    background-position: center;
	    background-repeat: no-repeat;
	    background-size: cover;
	}

	label, .password-label {
		-webkit-box-align: center;
		-webkit-align-items: center;
		-ms-flex-align: center;
		align-items: center;
		color: #000;
		font-size: 14px;
		font-style: normal;
		line-height: 140%;
		height: 32px;
		margin-bottom: -18px;
		text-align: left;
	}

	#layer {
		position: absolute;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
		background-color: #f5f4f4;
	}

	#logo {
		position: absolute;
		top: 0;
		height: 150px;
		width: 100%;
		background-position: left;
		background-repeat: no-repeat;
		background-size: contain;
		background-image: url("https://trod-dev.github.io/Puratos_EOP_Test/Puratos-Logo.png");
		background-color: white;
		border-bottom: 1px solid #cfcfcf;
	}

	input {
		width: 90%;
		padding: 10px;
		margin: 10px 0;
		border-radius: 25px;
		border: 1px solid black;
		font-weight: bold;
		text-align: left;
	}

	#api {
		background: rgba(255, 255, 255, 0.8);
		padding: 60px 30px;
		border-radius: 10px;
		box-shadow: none;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-self: end;
		width: 60%;
	}
        
	#forgotPassword {
		margin-top: 10px;
	    text-align: center;
	    font-weight: bold;
	    color: rgb(209, 0, 52);
	}

	#next {
		padding: 10px;
		width: 95%;
		color: white;
		font-weight: bold;
		background-color: rgb(209, 0, 52);
		margin-top: 10px;
		border-radius: 25px;
		border: none;
		cursor: pointer;
	}

	@media only screen and (max-height: 400px) {
		#logo {
			display: none;
		}
	}

	.divider h2 {
		display:none;
	}
	
	.create {
		display:none;
	}

	.entry{
		display:grid;
	}
	
	.entry-item .password-label {
		display: contents;
	}

	.entry-item{
		display: flex;
		flex-direction: column;
	}
	
	.error.itemLevel {
		order: 3;
	}
	
	.entry-item .password-label {
		order: 1;
	}
	
	.entry-item input[type="password"] {
		order: 2;
	}
	
	.entry-item #forgotPassword {
	  order: 4;
	}
	
	.entry .entry-item .error.itemLevel p{
		margin: 0;
		color: #e31002;
		font-size: 12px;
		font-style: normal;
		font-weight: 600;
		line-height: 16px;
		text-align: left;
		margin-bottom: 10px;
	}
	
	.heading {
		display:none;
	}
	
	input .highlightError {
		border: 1px solid #e31002;
		background: rgba(227, 16, 2, .05);
		color: #e31002;
	}
	
	.azure-layout-container {
		display: -ms-grid;
		display: grid;
		-ms-grid-columns: 50% 1fr;
		grid-template-columns: 60% 1fr;
		gap: 0 30px;
		height: calc(100% - 151px);
		margin-top: 151px;
		width: 100%;
		font-size: 16px;
		align-content: center;
		justify-items: center;
	}
	
	#registration {
		width: 100%;
		height: 100%;
	}
	
	h2 {
		font-size: 32px;
		font-style: normal;
		font-weight: 700;
		line-height: 34px;
		margin: 0;
		text-transform: none;
	}
	
	h3 {
		font-size: 16px;
		font-style: normal;
		font-weight: 700;
		color: #000;
		line-height: 22px;
		margin-top: 0;
	}
	
	#registration-title{
		margin-bottom: 20px;
	}
	
	#registration-title button{
		padding: 12px 30px;
		border-radius: 30px;
		font-size: 16px;
		font-style: normal;
		font-weight: 700;
		line-height: 150%;
		-webkit-transition: .4s all ease-in-out;
		transition: .4s all ease-in-out;
		text-align: center;
		background: #fff;
		color: #000;
		border: 1px solid #cc092f;
		width: 100%;
	}
	
	form {
		width: 100%;
	}
	
    </style>
</head>
<body>
    <div id="layer">
        <div id="logo"></div>
		<div class="azure-layout-container">
			<div id="api"></div>
			<div id="registration">
				<div id="registration-title">
					<h3>I am a Puratos customer but I don't have an account</h3>
				</div>
				<a href="https://connect-dev.puratos.com/EasyOrderPortal/Registration">
					<button>CREATE ACCOUNT</button>
				</a>
			</div>
		</div>
    </div>
	<!-- <script src="https://cdn.jsdelivr.net/gh/TRod-Dev/Puratos_EOP_Test@main/customLayoutChanges.js" defer></script> -->
	<script>
		console.log('loading js...');
		/**
		 * Injects a show/hide password toggle button with an inline SVG icon next to the password input.
		 */
		function insertPasswordToggle() {
		  const passwordInput = document.getElementById("password");

		  if (passwordInput && !document.getElementById("togglePassword")) {
			const wrapper = document.createElement("div");
			wrapper.style.display = "flex";
			wrapper.style.alignItems = "center";
			wrapper.style.position = "relative";
			wrapper.style.width = "100%";

			passwordInput.parentNode.insertBefore(wrapper, passwordInput);
			wrapper.appendChild(passwordInput);

			const toggleBtn = document.createElement("button");
			toggleBtn.type = "button";
			toggleBtn.id = "togglePassword";
			toggleBtn.setAttribute("aria-label", "Toggle password visibility");

			Object.assign(toggleBtn.style, {
			  background: "none",
			  border: "none",
			  cursor: "pointer",
			  padding: "0",
			  marginLeft: "-2em",
			  display: "flex",
			  alignItems: "center",
			  justifyContent: "center",
			  height: "100%"
			});

			toggleBtn.innerHTML = `
			  <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" fill="#000000" width="1.2em" height="1.2em" viewBox="0 0 442.04 442.04">
				<g>
				  <g>
					<path d="M221.02,341.304c-49.708,0-103.206-19.44-154.71-56.22C27.808,257.59,4.044,230.351,3.051,229.203
					  c-4.068-4.697-4.068-11.669,0-16.367c0.993-1.146,24.756-28.387,63.259-55.881c51.505-36.777,105.003-56.219,154.71-56.219
					  c49.708,0,103.207,19.441,154.71,56.219c38.502,27.494,62.266,54.734,63.259,55.881c4.068,4.697,4.068,11.669,0,16.367
					  c-0.993,1.146-24.756,28.387-63.259,55.881C324.227,321.863,270.729,341.304,221.02,341.304z
					  M29.638,221.021c9.61,9.799,27.747,27.03,51.694,44.071c32.83,23.361,83.714,51.212,139.688,51.212
					  s106.859-27.851,139.688-51.212c23.944-17.038,42.082-34.271,51.694-44.071c-9.609-9.799-27.747-27.03-51.694-44.071
					  c-32.829-23.362-83.714-51.212-139.688-51.212s-106.858,27.85-139.688,51.212C57.388,193.988,39.25,211.219,29.638,221.021z"/>
				  </g>
				  <g>
					<path d="M221.02,298.521c-42.734,0-77.5-34.767-77.5-77.5c0-42.733,34.766-77.5,77.5-77.5
					  c18.794,0,36.924,6.814,51.048,19.188c5.193,4.549,5.715,12.446,1.166,17.639c-4.549,5.193-12.447,5.714-17.639,1.166
					  c-9.564-8.379-21.844-12.993-34.576-12.993c-28.949,0-52.5,23.552-52.5,52.5s23.551,52.5,52.5,52.5
					  c28.95,0,52.5-23.552,52.5-52.5c0-6.903,5.597-12.5,12.5-12.5s12.5,5.597,12.5,12.5C298.521,263.754,263.754,298.521,221.02,298.521z"/>
				  </g>
				  <g>
					<path d="M221.02,246.021c-13.785,0-25-11.215-25-25s11.215-25,25-25c13.786,0,25,11.215,25,25S234.806,246.021,221.02,246.021z"/>
				  </g>
				</g>
			  </svg>
			`;

			wrapper.appendChild(toggleBtn);

			toggleBtn.addEventListener("click", () => {
			  const isHidden = passwordInput.type === "password";
			  passwordInput.type = isHidden ? "text" : "password";

			  const eyeIcon = toggleBtn.querySelector("#eyeIcon");
			  if (eyeIcon) {
				eyeIcon.style.fill = isHidden ? "#0078D4" : "#000";
			  }
			});
		  }
		}

		/**
		 * Combined logic to inject both UI elements and handle observers.
		 */
		function initializeCustomUI() {
		  insertPasswordToggle();  // stays next to password field

		  if (waitForApiContainer) clearInterval(waitForApiContainer);
		  if (observerInstance) {
			observerInstance.disconnect();
			console.log('ðŸ”Œ Observer disconnected');
		  }
		}

		/**
		 * Polling fallback in case DOM is delayed.
		 */
		let waitForApiContainer = setInterval(() => {
		  const apiReady = document.getElementById("api") || document.getElementById("container");
		  if (apiReady) initializeCustomUI();
		}, 300);

		/**
		 * MutationObserver for robustness.
		 */
		let observerInstance = null;

		document.addEventListener('DOMContentLoaded', () => {
		  const tryAttachObserver = () => {
			const container = document.getElementById("container");

			if (container) {
			  observerInstance = new MutationObserver(() => {
				initializeCustomUI();
			  });

			  observerInstance.observe(container, {
				childList: true,
				subtree: true
			  });

			  console.log('ðŸ‘ï¸ MutationObserver attached â€“ version 1.4');
			} else {
			  setTimeout(tryAttachObserver, 200);
			}
		  };

		  tryAttachObserver();
		});

		/**
		 * Invalidate the form validate (tooltip)
		 */
		 document.addEventListener('DOMContentLoaded', function() {
			const forms = document.querySelectorAll('form');
			forms.forEach(form => {
				form.noValidate = true;
			});
			console.log('Forms found:', forms);
		});
	</script>
</body>
</html>
